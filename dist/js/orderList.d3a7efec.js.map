{"version":3,"file":"js/orderList.d3a7efec.js","mappings":"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","sources":["webpack://shengxian/./src/components/Docker.vue","webpack://shengxian/./src/components/Docker.vue?f302","webpack://shengxian/./src/views/orderList/OrderList.vue","webpack://shengxian/./src/views/orderList/OrderList.vue?8702"],"sourcesContent":["<template>\r\n  <div class=\"docker\">\r\n    <div\r\n      v-for=\"(item, index) in dockerList\"\r\n      :key=\"item.icon\"\r\n      :class=\"{ docker__item: true, 'docker__item--active': index === currentIndex }\"\r\n    >\r\n      <router-link :to=\"item.to\">\r\n        <div class=\"iconfont\" v-html=\"item.icon\"></div>\r\n        <div class=\"docker__title\">{{ item.text }}</div>\r\n      </router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"Docker\",\r\n  props:['currentIndex'],\r\n  setup() {\r\n    const dockerList = [\r\n      { icon: \"&#xe652;\", text: \"首页\",to:{name:'Home'}},\r\n      { icon: \"&#xe6af;\", text: \"购物车\",to:{name:'CartList'} },\r\n      { icon: \"&#xe613;\", text: \"订单\",to:{name:'OrderList'} },\r\n      { icon: \"&#xe78b;\", text: \"我的\",to:{name:'PersonalInfo'} },\r\n    ];\r\n    return { dockerList };\r\n  },\r\n};\r\n</script> \r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../style/viriables.scss\";\r\n.wrapper {\r\n  background: #000;\r\n}\r\n.docker {\r\n  display: flex;\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  padding: 0 0.18rem;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n  height: 0.49rem;\r\n  border-top: 0.01rem solid $content-bgColor;\r\n  &__item {\r\n    flex: 1;\r\n    text-align: center;\r\n    a{\r\n      color: $content-fontcolor;\r\n      text-decoration: none;\r\n    }\r\n    .iconfont {\r\n      margin: 0.07rem 0 0.02rem;\r\n      font-size: 0.18rem;\r\n    }\r\n    &--active {\r\n      a{\r\n        color: #1fa4fc;\r\n      }\r\n    }\r\n  }\r\n  &__title {\r\n    font-size: 0.2rem;\r\n    transform: scale(0.5, 0.5);\r\n    transform-origin: center top;\r\n  }\r\n}\r\n</style>","import { render } from \"./Docker.vue?vue&type=template&id=7d249e67&scoped=true\"\nimport script from \"./Docker.vue?vue&type=script&lang=js\"\nexport * from \"./Docker.vue?vue&type=script&lang=js\"\n\nimport \"./Docker.vue?vue&type=style&index=0&id=7d249e67&lang=scss&scoped=true\"\n\nimport exportComponent from \"F:\\\\Web2022\\\\shengxian\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7d249e67\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"title\">我的订单</div>\r\n    <div class=\"orders\" v-for=\"(item, index) in list\" :key=\"index\">\r\n      <div class=\"order\">\r\n        <div class=\"order__title\">\r\n          {{ item.shopName }}\r\n          <span class=\"order__status\">{{\r\n            item.isCanceled ? \"已取消\" : \"已下单\"\r\n          }}</span>\r\n        </div>\r\n        <div class=\"order__content\">\r\n          <div class=\"order__content__imgs\">\r\n            <template\r\n              v-for=\"(innerItem, innerIndex) in item.products\"\r\n              :key=\"innerIndex\"\r\n            >\r\n              <img\r\n                class=\"order__content__img\"\r\n                :src=\"innerItem.product.imgUrl\"\r\n                v-if=\"innerIndex <= 3\"\r\n              />\r\n            </template>\r\n          </div>\r\n          <div class=\"order__content__info\">\r\n            <div class=\"order__content__price\">￥{{ item.totalPrice }}</div>\r\n            <div class=\"order__content__count\">共{{ item.totalNumber }}件</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Docker :currentIndex=\"2\" />\r\n</template>\r\n    \r\n\r\n\r\n<script>\r\nimport { reactive, toRefs } from \"vue\";\r\nimport { get } from \"../../utils/request\";\r\nimport Docker from \"../../components/Docker.vue\";\r\n\r\n//处理订单列表逻辑\r\nconst useOrderListEffect = () => {\r\n  const data = reactive({ list: [] });\r\n  const getNearbyList = async () => {\r\n    const result = await get(\"/api/order\");\r\n    // console.log(result,'--result');\r\n    if (result?.errno === 0 && result?.data?.length) {\r\n      const orderList = result.data;\r\n      orderList.forEach((order) => {\r\n        const products = order.products || [];\r\n        let totalPrice = 0;\r\n        let totalNumber = 0;\r\n        products.forEach((productItem) => {\r\n          totalNumber += productItem?.orderSales || 0;\r\n          totalPrice +=\r\n            productItem?.product?.price * productItem?.orderSales || 0;\r\n        });\r\n        order.totalPrice = totalPrice;\r\n        order.totalNumber = totalNumber;\r\n      });\r\n      // console.log(orderList)\r\n      data.list = result.data;\r\n    }\r\n  };\r\n  getNearbyList();\r\n  const { list } = toRefs(data);\r\n  return { list };\r\n};\r\n\r\nexport default {\r\n  name: \"orderList\",\r\n  components: { Docker },\r\n  setup() {\r\n    const { list } = useOrderListEffect();\r\n    console.log(list);\r\n    return { list };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../style/viriables.scss\";\r\n\r\n.wrapper {\r\n  overflow-y: auto;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0.5rem;\r\n  right: 0;\r\n  background: #f5f5f5;\r\n}\r\n.title {\r\n  line-height: 0.44rem;\r\n  background: $bgColor;\r\n  font-size: 0.16rem;\r\n  color: $content-fontcolor;\r\n  text-align: center;\r\n}\r\n.orders {\r\n}\r\n.order {\r\n  margin: 0.16rem 0.18rem;\r\n  padding: 0.16rem;\r\n  background: $bgColor;\r\n  &__title {\r\n    margin-bottom: 0.16rem;\r\n    line-height: 0.22rem;\r\n    font-size: 0.16rem;\r\n    color: $content-fontcolor;\r\n  }\r\n  &__status {\r\n    float: right;\r\n    font-size: 0.14rem;\r\n    color: $light-fontColor;\r\n  }\r\n  &__content {\r\n    display: flex;\r\n    &__imgs {\r\n      flex: 1;\r\n    }\r\n    &__img {\r\n      width: 0.4rem;\r\n      height: 0.4rem;\r\n      margin-right: 0.12rem;\r\n    }\r\n    &__info {\r\n      width: 0.7rem;\r\n    }\r\n    &__price {\r\n      margin-bottom: 0.04rem;\r\n      line-height: 0.2rem;\r\n      font-size: 0.14rem;\r\n      color: $hightlight-fontColor;\r\n      text-align: right;\r\n    }\r\n    &__count {\r\n      line-height: 0.14rem;\r\n      font-size: 0.12rem;\r\n      color: $content-fontcolor;\r\n      text-align: right;\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./OrderList.vue?vue&type=template&id=0ea0fcc4&scoped=true\"\nimport script from \"./OrderList.vue?vue&type=script&lang=js\"\nexport * from \"./OrderList.vue?vue&type=script&lang=js\"\n\nimport \"./OrderList.vue?vue&type=style&index=0&id=0ea0fcc4&lang=scss&scoped=true\"\n\nimport exportComponent from \"F:\\\\Web2022\\\\shengxian\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0ea0fcc4\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_Fragment","_renderList","$setup","dockerList","item","index","key","icon","_normalizeClass","docker__item","$props","currentIndex","_createVNode","_component_router_link","to","_createElementVNode","innerHTML","_hoisted_3","_toDisplayString","text","name","props","setup","__exports__","render","_hoisted_2","list","_hoisted_4","shopName","_hoisted_5","isCanceled","_hoisted_6","_hoisted_7","products","innerItem","innerIndex","src","product","imgUrl","_hoisted_9","_hoisted_10","totalPrice","_hoisted_11","totalNumber","_component_Docker","useOrderListEffect","data","reactive","getNearbyList","async","result","get","errno","length","orderList","forEach","order","productItem","orderSales","price","toRefs","components","Docker","console","log"],"sourceRoot":""}