{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { get } from '../../utils/request';\nimport Docker from '../../components/Docker';\nconst useUserEffect = () => {\n  const userInfo = reactive({\n    _id: '',\n    username: ''\n  });\n  const getUserInfo = async () => {\n    const result = await get('/api/user/info');\n    if (result?.errno === 0 && result?.data) {\n      const {\n        _id,\n        username\n      } = result.data;\n      userInfo._id = _id || '';\n      userInfo.username = username || '';\n    }\n  };\n  getUserInfo();\n  return userInfo;\n};\nexport default {\n  name: 'PersonalInfo',\n  components: {\n    Docker\n  },\n  setup() {\n    const router = useRouter();\n    const handleLogout = () => {\n      localStorage.removeItem('isLogin');\n      router.replace({\n        name: 'Login'\n      });\n    };\n    const handleAddressClick = () => {\n      router.push({\n        name: 'MyAddressList'\n      });\n    };\n    const userInfo = useUserEffect();\n    return {\n      handleLogout,\n      handleAddressClick,\n      userInfo\n    };\n  }\n};","map":{"version":3,"names":["reactive","useRouter","get","Docker","useUserEffect","userInfo","_id","username","getUserInfo","result","errno","data","name","components","setup","router","handleLogout","localStorage","removeItem","replace","handleAddressClick","push"],"sources":["F:\\Web2022\\shengxian\\src\\views\\personalInfo\\PersonalInfo.vue"],"sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"header\">\r\n      <div class=\"header__info\">\r\n        <div class=\"header__info__user\">{{ userInfo.username }}</div>\r\n        <div class=\"header__info__id\">ID:{{ userInfo._id }}</div>\r\n      </div>\r\n      <img\r\n        class=\"header__avatar\"\r\n        src=\"\"\r\n      />\r\n    </div>\r\n    <div class=\"list\">\r\n      <div class=\"list__item\" @click=\"handleAddressClick\">\r\n        <div class=\"list__item__icon iconfont\">&#xe619;</div>\r\n        <div class=\"list__item__test\">我的地址</div>\r\n        <div class=\"list__item__arrow iconfont\">&#xe6db;</div>\r\n      </div>\r\n    </div>\r\n    <div class=\"logout\" @click=\"handleLogout\">退出登陆</div>\r\n  </div>\r\n  <Docker :currentIndex=\"3\" />\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { get } from '../../utils/request'\r\nimport Docker from '../../components/Docker'\r\n\r\nconst useUserEffect = () => {\r\n  const userInfo = reactive({ _id: '', username: '' })\r\n   const getUserInfo = async () => {\r\n    const result = await get('/api/user/info')\r\n    if(result?.errno === 0 && result?.data) {\r\n      const { _id, username } = result.data\r\n      userInfo._id = _id || ''\r\n      userInfo.username = username || ''\r\n    }\r\n  }\r\n  getUserInfo()\r\n  return userInfo\r\n}\r\n\r\nexport default {\r\n  name: 'PersonalInfo',\r\n  components: { Docker },\r\n  setup() {\r\n    const router = useRouter()\r\n    const handleLogout = () => {\r\n      localStorage.removeItem('isLogin')\r\n      router.replace({ name: 'Login'})\r\n    }\r\n    const handleAddressClick = () => {\r\n      router.push({ name: 'MyAddressList'})\r\n    }\r\n    const userInfo = useUserEffect()\r\n    return { handleLogout, handleAddressClick, userInfo }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../style/viriables.scss\";\r\n.wrapper {\r\n  overflow-y: auto;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0.5rem;\r\n  right: 0;\r\n  background: $dark-bgColor;\r\n}\r\n.header {\r\n  position: relative;\r\n  height: 1.5rem;\r\n  background-image: linear-gradient(239deg, #3a6ff3 0%, #50c7fb 100%);\r\n  padding-top: 0.4rem;\r\n  &__info {\r\n    margin: 0.3rem 0.18rem 0 0.18rem;\r\n    padding-top: 0.46rem;\r\n    height: 0.66rem;\r\n    background: #fff;\r\n    border-radius: 0.08rem;\r\n    &__user {\r\n      font-size: 0.24rem;\r\n      color: #262628;\r\n      text-align: center;\r\n      line-height: 0.36rem;\r\n    }\r\n    &__id {\r\n      margin-top: 0.04rem;\r\n      font-size: 0.14rem;\r\n      color: #c1c0c9;\r\n      text-align: center;\r\n    }\r\n  }\r\n  &__avatar {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 0.2rem;\r\n    transform: translateX(-50%);\r\n    width: 0.94rem;\r\n    height: 0.94rem;\r\n    border-radius: 50%;\r\n  }\r\n}\r\n.list {\r\n  margin: 0.16rem 0.18rem 0 0.18rem;\r\n  background: $bgColor;\r\n  box-shadow: 0 0.08rem 0.16rem 0 rgba(0, 0, 0, 0.08);\r\n  border-radius: 0.08rem;\r\n  &__item {\r\n    display: flex;\r\n    padding: 0.2rem;\r\n    line-height: 0.22rem;\r\n    font-size: 0.14rem;\r\n    color: #262626;\r\n    &__icon {\r\n      margin-right: 0.12rem;\r\n      width: 0.22rem;\r\n      height: 0.22rem;\r\n      background: #32c5ff;\r\n      border-radius: 0.08rem;\r\n      text-align: center;\r\n      font-weight: bold;\r\n      color: $bgColor;\r\n    }\r\n    &__test {\r\n      flex: 1;\r\n    }\r\n    &__arrow {\r\n      width: 0.2rem;\r\n      transform: rotate(180deg);\r\n      font-weight: bold;\r\n      color: #c2c4ca;\r\n    }\r\n  }\r\n}\r\n.logout {\r\n  margin: 0.18rem;\r\n  line-height: 0.32rem;\r\n  background: $btn-bgColor;\r\n  color: $bgColor;\r\n  text-align: center;\r\n  border-radius: 0.04rem;\r\n}\r\n</style>\r\n"],"mappings":";AAyBA,SAASA,QAAO,QAAS,KAAI;AAC7B,SAASC,SAAQ,QAAS,YAAW;AACrC,SAASC,GAAE,QAAS,qBAAoB;AACxC,OAAOC,MAAK,MAAO,yBAAwB;AAE3C,MAAMC,aAAY,GAAIA,CAAA,KAAM;EAC1B,MAAMC,QAAO,GAAIL,QAAQ,CAAC;IAAEM,GAAG,EAAE,EAAE;IAAEC,QAAQ,EAAE;EAAG,CAAC;EAClD,MAAMC,WAAU,GAAI,MAAAA,CAAA,KAAY;IAC/B,MAAMC,MAAK,GAAI,MAAMP,GAAG,CAAC,gBAAgB;IACzC,IAAGO,MAAM,EAAEC,KAAI,KAAM,KAAKD,MAAM,EAAEE,IAAI,EAAE;MACtC,MAAM;QAAEL,GAAG;QAAEC;MAAS,IAAIE,MAAM,CAACE,IAAG;MACpCN,QAAQ,CAACC,GAAE,GAAIA,GAAE,IAAK,EAAC;MACvBD,QAAQ,CAACE,QAAO,GAAIA,QAAO,IAAK,EAAC;IACnC;EACF;EACAC,WAAW,EAAC;EACZ,OAAOH,QAAO;AAChB;AAEA,eAAe;EACbO,IAAI,EAAE,cAAc;EACpBC,UAAU,EAAE;IAAEV;EAAO,CAAC;EACtBW,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAId,SAAS,EAAC;IACzB,MAAMe,YAAW,GAAIA,CAAA,KAAM;MACzBC,YAAY,CAACC,UAAU,CAAC,SAAS;MACjCH,MAAM,CAACI,OAAO,CAAC;QAAEP,IAAI,EAAE;MAAO,CAAC;IACjC;IACA,MAAMQ,kBAAiB,GAAIA,CAAA,KAAM;MAC/BL,MAAM,CAACM,IAAI,CAAC;QAAET,IAAI,EAAE;MAAe,CAAC;IACtC;IACA,MAAMP,QAAO,GAAID,aAAa,EAAC;IAC/B,OAAO;MAAEY,YAAY;MAAEI,kBAAkB;MAAEf;IAAS;EACtD;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}