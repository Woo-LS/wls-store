{"ast":null,"code":"import { createStore } from 'vuex';\nexport default createStore({\n  state: {\n    cartList: {\n      //第一层级是商铺的id\n      // shopId: {\n      //第二层是商品id\n      //第二层内容是商品内容以及购物数量\n      //     productId: {\n      //       _id: '1',\n      //       name: '番茄250g/份',\n      //       imgUrl: 'http://www.dell-lee.com/imgs/vue3/tomato.png',\n      //       sales: 10,\n      //       price: 33.6,\n      //       oldPrice: 39.6,\n      //       count: 2\n      //     },\n      //   },\n    }\n  },\n  getters: {},\n  mutations: {\n    changeCartItemInfo(state, payload) {\n      const {\n        shopId,\n        productId,\n        productInfo\n      } = payload;\n      let shopInfo = state.cartList[shopId];\n      if (!shopInfo) {\n        shopInfo = {};\n      }\n      let product = shopInfo[productId];\n      if (!product) {\n        product = productInfo;\n        product.count = 0;\n      }\n      product.count = product.count + payload.num;\n      if (payload.num > 0) {\n        product.check = false;\n      }\n      if (product.count < 0) {\n        product.count = 0;\n      }\n      shopInfo[productId] = product;\n      state.cartList[shopId] = shopInfo;\n      // console.log(shopInfo)\n      // console.log(shopId,product,productInfo)\n    },\n\n    changeCartItemChecked(state, payload) {\n      const {\n        shopId,\n        productId\n      } = payload;\n      const product = state.cartList[shopId][productId];\n      product.check = !product.check;\n    }\n  },\n  actions: {},\n  modules: {}\n});","map":{"version":3,"names":["createStore","state","cartList","getters","mutations","changeCartItemInfo","payload","shopId","productId","productInfo","shopInfo","product","count","num","check","changeCartItemChecked","actions","modules"],"sources":["F:/Web2022/week23-25/shengxian/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\n\nexport default createStore({\n  state: {\n    cartList: {\n      //第一层级是商铺的id\n      // shopId: {\n      //第二层是商品id\n      //第二层内容是商品内容以及购物数量\n      //     productId: {\n      //       _id: '1',\n      //       name: '番茄250g/份',\n      //       imgUrl: 'http://www.dell-lee.com/imgs/vue3/tomato.png',\n      //       sales: 10,\n      //       price: 33.6,\n      //       oldPrice: 39.6,\n      //       count: 2\n      //     },\n      //   },\n    }\n  },\n  getters: {\n  },\n  mutations: {\n    changeCartItemInfo(state, payload) {\n      const { shopId, productId, productInfo } = payload;\n      let shopInfo = state.cartList[shopId];\n      if (!shopInfo) { shopInfo = {} }\n      let product = shopInfo[productId]\n      if (!product) { \n        product = productInfo \n        product.count=0\n      }\n      product.count =product.count+payload.num\n      if(payload.num>0){product.check=false}\n      if(product.count<0){product.count=0}\n      shopInfo[productId]=product\n      state.cartList[shopId]=shopInfo\n      // console.log(shopInfo)\n      // console.log(shopId,product,productInfo)\n    },\n    changeCartItemChecked(state,payload){\n      const {shopId,productId}=payload\n      const product=state.cartList[shopId][productId]\n      product.check=!product.check\n    }\n  },\n  actions: {\n  },\n  modules: {\n  }\n})\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAElC,eAAeA,WAAW,CAAC;EACzBC,KAAK,EAAE;IACLC,QAAQ,EAAE;MACR;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IAAA;EAEJ,CAAC;EACDC,OAAO,EAAE,CACT,CAAC;EACDC,SAAS,EAAE;IACTC,kBAAkBA,CAACJ,KAAK,EAAEK,OAAO,EAAE;MACjC,MAAM;QAAEC,MAAM;QAAEC,SAAS;QAAEC;MAAY,CAAC,GAAGH,OAAO;MAClD,IAAII,QAAQ,GAAGT,KAAK,CAACC,QAAQ,CAACK,MAAM,CAAC;MACrC,IAAI,CAACG,QAAQ,EAAE;QAAEA,QAAQ,GAAG,CAAC,CAAC;MAAC;MAC/B,IAAIC,OAAO,GAAGD,QAAQ,CAACF,SAAS,CAAC;MACjC,IAAI,CAACG,OAAO,EAAE;QACZA,OAAO,GAAGF,WAAW;QACrBE,OAAO,CAACC,KAAK,GAAC,CAAC;MACjB;MACAD,OAAO,CAACC,KAAK,GAAED,OAAO,CAACC,KAAK,GAACN,OAAO,CAACO,GAAG;MACxC,IAAGP,OAAO,CAACO,GAAG,GAAC,CAAC,EAAC;QAACF,OAAO,CAACG,KAAK,GAAC,KAAK;MAAA;MACrC,IAAGH,OAAO,CAACC,KAAK,GAAC,CAAC,EAAC;QAACD,OAAO,CAACC,KAAK,GAAC,CAAC;MAAA;MACnCF,QAAQ,CAACF,SAAS,CAAC,GAACG,OAAO;MAC3BV,KAAK,CAACC,QAAQ,CAACK,MAAM,CAAC,GAACG,QAAQ;MAC/B;MACA;IACF,CAAC;;IACDK,qBAAqBA,CAACd,KAAK,EAACK,OAAO,EAAC;MAClC,MAAM;QAACC,MAAM;QAACC;MAAS,CAAC,GAACF,OAAO;MAChC,MAAMK,OAAO,GAACV,KAAK,CAACC,QAAQ,CAACK,MAAM,CAAC,CAACC,SAAS,CAAC;MAC/CG,OAAO,CAACG,KAAK,GAAC,CAACH,OAAO,CAACG,KAAK;IAC9B;EACF,CAAC;EACDE,OAAO,EAAE,CACT,CAAC;EACDC,OAAO,EAAE,CACT;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}