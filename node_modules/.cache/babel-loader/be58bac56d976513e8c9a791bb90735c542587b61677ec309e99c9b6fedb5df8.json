{"ast":null,"code":"import { createStore } from 'vuex';\nexport default createStore({\n  state: {\n    cartList: {\n      //第一层级是商铺的id\n      // shopId: {\n      // shopName:'沃尔玛'\n      // productList:{\n      // productId: {\n      //       _id: '1',\n      //       name: '番茄250g/份',\n      //       imgUrl: 'http://www.dell-lee.com/imgs/vue3/tomato.png',\n      //       sales: 10,\n      //       price: 33.6,\n      //       oldPrice: 39.6,\n      //       count: 2\n      //     },\n      // }\n      //第二层是商品id\n      //第二层内容是商品内容以及购物数量\n      //     \n      //   },\n    }\n  },\n  getters: {},\n  mutations: {\n    changeCartItemInfo(state, payload) {\n      const {\n        shopId,\n        productId,\n        productInfo\n      } = payload;\n      let shopInfo = state.cartList[shopId] || {\n        shopName: '',\n        productList: {}\n      };\n      let product = shopInfo.productList[productId];\n      if (!product) {\n        productInfo.count = 0;\n        product = productInfo;\n      }\n      product.count = product.count + payload.num;\n      if (payload.num > 0) {\n        product.check = true;\n      }\n      if (product.count < 0) {\n        product.count = 0;\n      }\n      shopInfo.productList[productId] = product;\n      state.cartList[shopId] = shopInfo;\n      // console.log(shopInfo)\n      // console.log(shopId,product,productInfo)\n    },\n\n    changeCartItemChecked(state, payload) {\n      const {\n        shopId,\n        productId\n      } = payload;\n      const product = state.cartList[shopId][productId];\n      product.check = !product.check;\n    },\n    cleanCartProducts(state, payload) {\n      const {\n        shopId\n      } = payload;\n      state.cartList[shopId] = {};\n    },\n    setCartItemsChecked(state, payload) {\n      const {\n        shopId\n      } = payload;\n      const products = state.cartList[shopId];\n      if (products) {\n        for (let key in products) {\n          const product = products[key];\n          product.check = true;\n        }\n      }\n    },\n    changeShopName(state, payload) {\n      const {\n        shopId,\n        shopName\n      } = payload;\n      const shopInfo = state.cartList[shopId] || {\n        shopName: '',\n        productList: {}\n      };\n      shopInfo.shopName = shopName;\n      state.cartList[shopId] = shopInfo;\n    }\n  },\n  actions: {},\n  modules: {}\n});","map":{"version":3,"names":["createStore","state","cartList","getters","mutations","changeCartItemInfo","payload","shopId","productId","productInfo","shopInfo","shopName","productList","product","count","num","check","changeCartItemChecked","cleanCartProducts","setCartItemsChecked","products","key","changeShopName","actions","modules"],"sources":["F:/Web2022/week23-25/shengxian/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\n\nexport default createStore({\n  state: {\n    cartList: {\n      //第一层级是商铺的id\n      // shopId: {\n        // shopName:'沃尔玛'\n        // productList:{\n          // productId: {\n            //       _id: '1',\n            //       name: '番茄250g/份',\n            //       imgUrl: 'http://www.dell-lee.com/imgs/vue3/tomato.png',\n            //       sales: 10,\n            //       price: 33.6,\n            //       oldPrice: 39.6,\n            //       count: 2\n            //     },\n        // }\n      //第二层是商品id\n      //第二层内容是商品内容以及购物数量\n      //     \n      //   },\n    }\n  },\n  getters: {\n  },\n  mutations: {\n    changeCartItemInfo(state, payload) {\n      const { shopId, productId, productInfo } = payload;\n\n      let shopInfo = state.cartList[shopId] || {\n        shopName: '',productList:{}\n      };\n      let product = shopInfo.productList[productId] \n      if (!product) {\n        productInfo.count=0\n        product = productInfo\n      }\n      product.count = product.count + payload.num\n      if (payload.num > 0) { product.check = true }\n      if (product.count < 0) { product.count = 0 }\n      shopInfo.productList[productId] = product\n      state.cartList[shopId] = shopInfo\n      // console.log(shopInfo)\n      // console.log(shopId,product,productInfo)\n    },\n    changeCartItemChecked(state, payload) {\n      const { shopId, productId } = payload\n      const product = state.cartList[shopId][productId]\n      product.check = !product.check\n    },\n    cleanCartProducts(state,payload){\n      const {shopId}=payload\n      state.cartList[shopId]={}\n    },\n    setCartItemsChecked(state,payload){\n      const {shopId}=payload\n      const products= state.cartList[shopId]\n      if(products){\n        for(let key in products){\n          const product =products[key]\n          product.check=true\n        }\n      }\n    },\n    changeShopName(state,payload){\n      const {shopId,shopName} =payload\n      const shopInfo=state.cartList[shopId] || {\n        shopName: '',productList:{}\n      }\n      shopInfo.shopName=shopName\n      state.cartList[shopId]=shopInfo\n    }\n  },\n  actions: {\n  },\n  modules: {\n  }\n})\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAElC,eAAeA,WAAW,CAAC;EACzBC,KAAK,EAAE;IACLC,QAAQ,EAAE;MACR;MACA;MACE;MACA;MACE;MACE;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACJ;MACF;MACA;MACA;MACA;IAAA;EAEJ,CAAC;EACDC,OAAO,EAAE,CACT,CAAC;EACDC,SAAS,EAAE;IACTC,kBAAkBA,CAACJ,KAAK,EAAEK,OAAO,EAAE;MACjC,MAAM;QAAEC,MAAM;QAAEC,SAAS;QAAEC;MAAY,CAAC,GAAGH,OAAO;MAElD,IAAII,QAAQ,GAAGT,KAAK,CAACC,QAAQ,CAACK,MAAM,CAAC,IAAI;QACvCI,QAAQ,EAAE,EAAE;QAACC,WAAW,EAAC,CAAC;MAC5B,CAAC;MACD,IAAIC,OAAO,GAAGH,QAAQ,CAACE,WAAW,CAACJ,SAAS,CAAC;MAC7C,IAAI,CAACK,OAAO,EAAE;QACZJ,WAAW,CAACK,KAAK,GAAC,CAAC;QACnBD,OAAO,GAAGJ,WAAW;MACvB;MACAI,OAAO,CAACC,KAAK,GAAGD,OAAO,CAACC,KAAK,GAAGR,OAAO,CAACS,GAAG;MAC3C,IAAIT,OAAO,CAACS,GAAG,GAAG,CAAC,EAAE;QAAEF,OAAO,CAACG,KAAK,GAAG,IAAI;MAAC;MAC5C,IAAIH,OAAO,CAACC,KAAK,GAAG,CAAC,EAAE;QAAED,OAAO,CAACC,KAAK,GAAG,CAAC;MAAC;MAC3CJ,QAAQ,CAACE,WAAW,CAACJ,SAAS,CAAC,GAAGK,OAAO;MACzCZ,KAAK,CAACC,QAAQ,CAACK,MAAM,CAAC,GAAGG,QAAQ;MACjC;MACA;IACF,CAAC;;IACDO,qBAAqBA,CAAChB,KAAK,EAAEK,OAAO,EAAE;MACpC,MAAM;QAAEC,MAAM;QAAEC;MAAU,CAAC,GAAGF,OAAO;MACrC,MAAMO,OAAO,GAAGZ,KAAK,CAACC,QAAQ,CAACK,MAAM,CAAC,CAACC,SAAS,CAAC;MACjDK,OAAO,CAACG,KAAK,GAAG,CAACH,OAAO,CAACG,KAAK;IAChC,CAAC;IACDE,iBAAiBA,CAACjB,KAAK,EAACK,OAAO,EAAC;MAC9B,MAAM;QAACC;MAAM,CAAC,GAACD,OAAO;MACtBL,KAAK,CAACC,QAAQ,CAACK,MAAM,CAAC,GAAC,CAAC,CAAC;IAC3B,CAAC;IACDY,mBAAmBA,CAAClB,KAAK,EAACK,OAAO,EAAC;MAChC,MAAM;QAACC;MAAM,CAAC,GAACD,OAAO;MACtB,MAAMc,QAAQ,GAAEnB,KAAK,CAACC,QAAQ,CAACK,MAAM,CAAC;MACtC,IAAGa,QAAQ,EAAC;QACV,KAAI,IAAIC,GAAG,IAAID,QAAQ,EAAC;UACtB,MAAMP,OAAO,GAAEO,QAAQ,CAACC,GAAG,CAAC;UAC5BR,OAAO,CAACG,KAAK,GAAC,IAAI;QACpB;MACF;IACF,CAAC;IACDM,cAAcA,CAACrB,KAAK,EAACK,OAAO,EAAC;MAC3B,MAAM;QAACC,MAAM;QAACI;MAAQ,CAAC,GAAEL,OAAO;MAChC,MAAMI,QAAQ,GAACT,KAAK,CAACC,QAAQ,CAACK,MAAM,CAAC,IAAI;QACvCI,QAAQ,EAAE,EAAE;QAACC,WAAW,EAAC,CAAC;MAC5B,CAAC;MACDF,QAAQ,CAACC,QAAQ,GAACA,QAAQ;MAC1BV,KAAK,CAACC,QAAQ,CAACK,MAAM,CAAC,GAACG,QAAQ;IACjC;EACF,CAAC;EACDa,OAAO,EAAE,CACT,CAAC;EACDC,OAAO,EAAE,CACT;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}